<div class="status-updates">
  <% if current_user == @map.user %>
      <%= form_for([@map, @status_update]) do |f| %>
          <div class="content">
            <%= f.text_field :content, :placeholder => "LÃ¤gg till statusuppdatering" %>
          </div>
      <% end %>
  <% end %>
  <ul>
    <% @map.status_updates.each do |s| %>
        <li>
          <%= s.user.username %>: <%= s.content %><br />
          <%= s.created_at %>
          <% if current_user == s.user %>
              <%= link_to 'Ta bort', map_status_update_path(@map.id, s.id), :confirm => 'Saker', :method => :delete %>
              <% if current_user.likes?(s) %>
                        (<%= link_to "Sluta Gilla", map_status_update_unlike_path(@map.id, s.id), :method=>:post %>)
                      <% else %> 
                        (<%= link_to "Gilla", map_status_update_like_path(@map.id, s.id), :method=>:post %>)
                      <% end %>
          <% end %>
          <% if s.status_comments.any? %>
              <ul class="status-comments">
                <% s.status_comments.each do |c| %>
                    <li><%= c.user.username %>: <%= c.content %><br />
                      <%= c.created_at %>
                      <% if current_user == c.user %>
                          <%= link_to 'Ta bort', map_status_update_status_comment_path(@map.id, s.id, c.id), :confirm => 'Vill du ta bort kommentaren?', :method => :delete %>
                      <% end %>
                      
                    </li>
                <% end %>
              </ul>
          <% end %>
        </li>
        <li class="status_comment_form">
          <%= form_for([@map, s, @status_comment]) do |f| %>
              <div class="content">
                <%= f.text_field :content, :placeholder => "Skriv kommentar..." %>
              </div>
          <% end %>
        </li>
    <% end %>
  </ul>
</div>
